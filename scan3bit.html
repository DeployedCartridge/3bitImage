<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>480x360 Image 3-Bit Color Scanner</title><style>body{font-family:sans-serif;}#canvas{background:#eee;display:block;margin:1em auto;}#output{width:100%;height:200px;}.center{display:flex;justify-content:center;align-items:center;}</style></head><body><h2>Upload an image (centered, not stretched), scan 480x360, output 3-bit color</h2><input type="file" id="fileInput" accept="image/*"><br><br><div class="center"><canvas id="canvas" width="480" height="360"></canvas></div><button id="scanBtn">Scan and Get 3-Bit Color Output</button><h3>3-Bit Color Output (0-8, copyable):</h3><textarea id="output" readonly></textarea><script>const canvas=document.getElementById('canvas');const ctx=canvas.getContext('2d');const fileInput=document.getElementById('fileInput');const scanBtn=document.getElementById('scanBtn');const output=document.getElementById('output');let img=null;fileInput.addEventListener('change',function(){const file=fileInput.files[0];if(!file)return;const reader=new FileReader();reader.onload=function(e){img=new Image();img.onload=function(){ctx.clearRect(0,0,canvas.width,canvas.height);let iw=img.width,ih=img.height;let cx=(canvas.width-iw)/2;let cy=(canvas.height-ih)/2;if(iw>canvas.width||ih>canvas.height){let scale=Math.min(canvas.width/iw,canvas.height/ih);iw=iw*scale;ih=ih*scale;cx=(canvas.width-iw)/2;cy=(canvas.height-ih)/2;}ctx.clearRect(0,0,canvas.width,canvas.height);ctx.drawImage(img,cx,cy,iw,ih);};img.src=e.target.result;};reader.readAsDataURL(file);});scanBtn.addEventListener('click',function(){if(!img){alert("Please upload an image first!");return;}const imageData=ctx.getImageData(0,0,canvas.width,canvas.height);const data=imageData.data;let colorStr="";for(let y=0;y<canvas.height;y++){for(let x=0;x<canvas.width;x++){const i=(y*canvas.width+x)*4;const r=data[i],g=data[i+1],b=data[i+2],a=data[i+3];if(a<128){colorStr+="0";continue;}const r_bit=(r>85)?1:0;const g_bit=(g>85)?1:0;const b_bit=(b>85)?1:0;const level=((r_bit<<2)|(g_bit<<1)|b_bit)+1;colorStr+=level.toString();}}output.value=colorStr;});</script></body></html>